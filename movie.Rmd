---
title: "movie"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
x = 1
```

```{r}
library(magrittr)
library(plyr)
```
# Variables
```{r}
ratings = read.csv('ratings.csv')
movies = read.csv('movies.csv')
links = read.csv('links.csv')
tags = read.csv('tags.csv')
genome_scores = read.csv('genome-scores.csv')
genome_tags = read.csv('genome-tags.csv')
```
## Top film

```{r}

View(movies)
View(ratings)

#Meilleure ratings
# nbview = aggregate(ratings, list(Movie=ratings.movieId), sum)
movie_views = count(ratings, vars = "movieId")
top_view = head(movie_views[order(movie_views$freq, decreasing = TRUE),], 100)
top_view = merge(x = movies, y = top_view, by.x = "movieId", by.y = "movieId")
View(top_view)

avg_ratings = ddply(ratings, .(movieId), summarize, Avg=mean(rating))
top_populaire = head(avg_ratings[order(avg_ratings$Avg, decreasing = TRUE),], 100)
movie_top = merge(x = movies, y = top_populaire, by.x = "movieId", by.y = "movieId")
View(movie_top)

#Merge
#all_data c'est toutes les donn√©es pour les films
all_data = merge(x =ratings, y = movies, by.x = "movieId", by.y = "movieId")
all_data = merge(x = all_data, y = links, by.x = "movieId", by.y = "movieId")
all_data = merge(x = all_data, y = tags, by.x = "movieId", by.y = "movieId")
all_data = merge(x = all_data, y = genome_scores, by.x = "movieId", by.y = "movieId")




```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
